<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <title>Letter Rush</title>
  <style>
    :root {
      --font-scale: 1;
      --contrast-bg: #f9fafb;
      --contrast-color: #000;
    }

    body {
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
      background: var(--contrast-bg);
      color: var(--contrast-color);
      font-size: calc(1rem * var(--font-scale));
    }

    h1 {
      font-size: 1.5em;
      margin-bottom: 10px;
    }

    select, button {
      padding: 8px 14px;
      margin: 5px;
      font-size: 1em;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
      gap: 12px;
      justify-content: center;
      margin: 20px auto;
    }

    .letter {
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 8px;
      font-size: var(--letter-font-size, 1.2em);
      font-weight: bold;
      background: white;
      cursor: pointer;
      user-select: none;
    }

    .letter.used {
      background: #e2e8f0;
      color: #999;
      border-color: #ddd;
      text-decoration: line-through;
      cursor: not-allowed;
    }

    #timer {
      font-size: 1.2em;
      margin-top: 10px;
      font-weight: bold;
    }

    .controls {
      margin-top: 20px;
    }

    input[type="range"] {
      width: 200px;
      vertical-align: middle;
    }

    label {
      font-size: 0.9em;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h1>Letter Rush</h1>

  <div>
    <select id="topicSelect">
      <option value="">Choose a topic</option>
    </select>

    <select id="timerSelect">
      <option value="10000">10 seconds</option>
      <option value="15000" selected>15 seconds</option>
      <option value="20000">20 seconds</option>
      <option value="30000">30 seconds</option>
    </select>

    <button onclick="randomTopic()">üé≤ Random Topic</button>
    <button onclick="startRound()">‚ñ∂Ô∏è Start</button>
    <button onclick="resetLetters()">üîÑ Reset</button>
  </div>

  <div class="controls">
    <label>üåì Contrast:
      <button onclick="toggleContrast()">Toggle</button>
    </label>
    <label>üÖ∞ Menu Text Size:
      <button onclick="toggleFontScale()">Toggle</button>
    </label>
    <label>üî† Letter Size:
      <input type="range" id="letterSizeSlider" min="1" max="3" step="0.1" value="1.2">
    </label>
  </div>

  <div id="topicDisplay" style="margin-top: 10px; font-weight: bold;"></div>
  <div id="timer">Timer: 15.0s</div>
  <div class="grid" id="letterGrid"></div>

  <script>
    const LETTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    const TOPICS = [
      'Animals','Countries','Fruits','Cities','Colors','Sports','Vehicles',
      'Occupations','Things in a kitchen','Movies','TV Shows','Cartoons',
      'Superheroes','Foods','Desserts','Body parts','School subjects','Toys',
      'Games','Stores','Restaurants','Holidays','Tools','Weather','Emotions'
    ];
    let used = new Set();
    let running = false;
    let timer = null;
    let remaining = 15000;
    let fontScales = [1, 1.2, 1.4];
    let currentScaleIndex = 0;
    let darkMode = false;

    const letterGrid = document.getElementById('letterGrid');
    const timerEl = document.getElementById('timer');
    const topicDisplay = document.getElementById('topicDisplay');
    const topicSelect = document.getElementById('topicSelect');
    const timerSelect = document.getElementById('timerSelect');
    const letterSizeSlider = document.getElementById('letterSizeSlider');

    TOPICS.forEach(t => {
      const opt = document.createElement('option');
      opt.value = t;
      opt.textContent = t;
      topicSelect.appendChild(opt);
    });

    function buildGrid() {
      letterGrid.innerHTML = '';
      LETTERS.forEach(letter => {
        const div = document.createElement('div');
        div.textContent = letter;
        div.className = 'letter';
        div.onclick = () => onLetterClick(letter, div);
        letterGrid.appendChild(div);
      });
    }

    function onLetterClick(letter, div) {
      if (!running || used.has(letter)) return;
      used.add(letter);
      div.classList.add('used');
      resetTimer();
    }

    function resetLetters() {
      used.clear();
      running = false;
      clearInterval(timer);
      remaining = parseInt(timerSelect.value);
      timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
      buildGrid();
      topicDisplay.textContent = '';
    }

    function randomTopic() {
      const pick = TOPICS[Math.floor(Math.random() * TOPICS.length)];
      topicSelect.value = pick;
      topicDisplay.textContent = 'Topic: ' + pick;
    }

    function startRound() {
      if (!topicSelect.value) {
        alert('Please choose a topic first.');
        return;
      }
      topicDisplay.textContent = 'Topic: ' + topicSelect.value;
      used.clear();
      running = true;
      remaining = parseInt(timerSelect.value);
      buildGrid();
      resetTimer();
    }

    function resetTimer() {
      clearInterval(timer);
      remaining = parseInt(timerSelect.value);
      timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
      timer = setInterval(() => {
        remaining -= 100;
        timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
        if (remaining <= 0) {
          clearInterval(timer);
          running = false;
          timerEl.textContent = '‚è∞ Time\'s up!';
        }
      }, 100);
    }

    function toggleContrast() {
      darkMode = !darkMode;
      document.documentElement.style.setProperty('--contrast-bg', darkMode ? '#111' : '#f9fafb');
      document.documentElement.style.setProperty('--contrast-color', darkMode ? '#fff' : '#000');
    }

    function toggleFontScale() {
      currentScaleIndex = (currentScaleIndex + 1) % fontScales.length;
      document.documentElement.style.setProperty('--font-scale', fontScales[currentScaleIndex]);
    }

    letterSizeSlider.addEventListener('input', () => {
      const val = letterSizeSlider.value;
      document.documentElement.style.setProperty('--letter-font-size', `${val}em`);
    });

    buildGrid();
  </script>
</body>
</html>

