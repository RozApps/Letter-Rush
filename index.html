<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <title>Letter Rush</title>
    <style>
      :root {
        --menu-size: 18px;
        --bg-color: #f9fafb;
        --letter-bg: white;
        --letter-border: #ccc;
        --text-color: black;
        --letter-text-color: black;
        --used-bg: #e2e8f0;
        --used-color: #999;
        --used-border: #ddd;
      }

      body {
        font-family: sans-serif;
        padding: 20px;
        text-align: center;
        background: var(--bg-color);
        color: var(--text-color);
      }

      h1 {
        font-size: 36px;
        margin-bottom: 20px;
      }

      select, button {
        padding: 12px 18px;
        margin: 8px;
        font-size: var(--menu-size);
        min-height: 44px;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
        gap: 12px;
        justify-content: center;
        max-width: 420px;
        margin: 20px auto;
      }

      .letter {
        padding: 18px;
        border: 2px solid var(--letter-border);
        border-radius: 8px;
        font-size: var(--letter-size, 32px);
        font-weight: bold;
        background: var(--letter-bg);
        color: var(--letter-text-color);
        cursor: pointer;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .letter.used {
        background: var(--used-bg);
        color: var(--used-color);
        border-color: var(--used-border);
        text-decoration: line-through;
        cursor: not-allowed;
      }

      #timer {
        font-size: 24px;
        margin-top: 10px;
        font-weight: bold;
      }

      .button-row {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
      }

    </style>
  </head>
  <body>
    <h1>Letter Rush</h1>

    <div class="button-row">
      <select id="topicSelect">
        <option value="">Choose a topic</option>
      </select>
      <button onclick="randomTopic()">üé≤ Random Topic</button>

      <select id="timerSelect">
        <option value="10000">10 seconds</option>
        <option value="15000" selected>15 seconds</option>
        <option value="20000">20 seconds</option>
        <option value="30000">30 seconds</option>
      </select>

      <button onclick="toggleMenuSize()" id="menuSizeButton">Menu Text Size: 18px</button>
      <button onclick="toggleLetterSize()" id="letterSizeButton">Letter Size: 32px</button>
      <button onclick="toggleContrast()" id="contrastButton">üîÜ Normal Contrast</button>
    </div>

    <div class="button-row">
      <button onclick="startRound()">‚ñ∂Ô∏è Start</button>
      <button onclick="resetLetters()">üîÑ Reset</button>
    </div>

    <div id="topicDisplay" style="margin-top: 10px; font-weight: bold;"></div>
    <div id="timer">Timer: 15.0s</div>
    <div class="grid" id="letterGrid"></div>

    <script>
      const LETTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      const TOPICS = [
        'Animals','Countries','Fruits','Cities','Colors','Sports','Vehicles',
        'Occupations','Things in a kitchen','Movies','TV Shows','Cartoons',
        'Superheroes','Foods','Desserts','Body parts','School subjects','Toys',
        'Games','Stores','Restaurants','Holidays','Tools','Weather','Emotions'
      ];

      let used = new Set();
      let running = false;
      let timer = null;
      let remaining = 15000;

      const letterGrid = document.getElementById('letterGrid');
      const timerEl = document.getElementById('timer');
      const topicDisplay = document.getElementById('topicDisplay');
      const topicSelect = document.getElementById('topicSelect');
      const timerSelect = document.getElementById('timerSelect');
      const menuSizeButton = document.getElementById('menuSizeButton');
      const letterSizeButton = document.getElementById('letterSizeButton');
      const contrastButton = document.getElementById('contrastButton');

      const menuSizes = ['18px', '22px', '26px'];
      let menuSizeStep = 0;
      const letterSizes = ['28px', '32px', '40px', '48px'];
      let letterSizeStep = 1; // Start at 32px
      let highContrast = false;

      function toggleMenuSize() {
        menuSizeStep = (menuSizeStep + 1) % menuSizes.length;
        const newSize = menuSizes[menuSizeStep];
        document.documentElement.style.setProperty('--menu-size', newSize);
        menuSizeButton.textContent = `Menu Text Size: ${newSize}`;
      }

      function toggleLetterSize() {
        letterSizeStep = (letterSizeStep + 1) % letterSizes.length;
        const newSize = letterSizes[letterSizeStep];
        document.documentElement.style.setProperty('--letter-size', newSize);
        letterSizeButton.textContent = `Letter Size: ${newSize}`;
      }

      function toggleContrast() {
        highContrast = !highContrast;
        if (highContrast) {
          document.documentElement.style.setProperty('--bg-color', '#000000');
          document.documentElement.style.setProperty('--letter-bg', '#ffffff');
          document.documentElement.style.setProperty('--letter-border', '#000000');
          document.documentElement.style.setProperty('--text-color', '#ffffff');
          document.documentElement.style.setProperty('--letter-text-color', '#000000');
          document.documentElement.style.setProperty('--used-bg', '#333333');
          document.documentElement.style.setProperty('--used-color', '#cccccc');
          document.documentElement.style.setProperty('--used-border', '#666666');
          contrastButton.textContent = 'üåô High Contrast';
        } else {
          document.documentElement.style.setProperty('--bg-color', '#f9fafb');
          document.documentElement.style.setProperty('--letter-bg', 'white');
          document.documentElement.style.setProperty('--letter-border', '#ccc');
          document.documentElement.style.setProperty('--text-color', 'black');
          document.documentElement.style.setProperty('--letter-text-color', 'black');
          document.documentElement.style.setProperty('--used-bg', '#e2e8f0');
          document.documentElement.style.setProperty('--used-color', '#999');
          document.documentElement.style.setProperty('--used-border', '#ddd');
          contrastButton.textContent = 'üîÜ Normal Contrast';
        }
      }

      TOPICS.forEach(t => {
        const opt = document.createElement('option');
        opt.value = t;
        opt.textContent = t;
        topicSelect.appendChild(opt);
      });

      function buildGrid() {
        letterGrid.innerHTML = '';
        LETTERS.forEach(letter => {
          const div = document.createElement('div');
          div.textContent = letter;
          div.className = 'letter';
          div.onclick = () => onLetterClick(letter, div);
          letterGrid.appendChild(div);
        });
      }

      function onLetterClick(letter, div) {
        if (!running || used.has(letter)) return;
        used.add(letter);
        div.classList.add('used');
        resetTimer();
      }

      function resetLetters() {
        used.clear();
        running = false;
        clearInterval(timer);
        remaining = parseInt(timerSelect.value);
        timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
        buildGrid();
        topicDisplay.textContent = '';
      }

      function randomTopic() {
        const pick = TOPICS[Math.floor(Math.random() * TOPICS.length)];
        topicSelect.value = pick;
        topicDisplay.textContent = 'Topic: ' + pick;
      }

      function startRound() {
        if (!topicSelect.value) {
          alert('Please choose a topic first.');
          return;
        }
        topicDisplay.textContent = 'Topic: ' + topicSelect.value;
        used.clear();
        running = true;
        remaining = parseInt(timerSelect.value);
        buildGrid();
        resetTimer();
      }

      function resetTimer() {
        clearInterval(timer);
        remaining = parseInt(timerSelect.value);
        timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
        timer = setInterval(() => {
          remaining -= 100;
          timerEl.textContent = 'Timer: ' + (remaining / 1000).toFixed(1) + 's';
          if (remaining <= 0) {
            clearInterval(timer);
            running = false;
            timerEl.textContent = '‚è∞ Time\'s up!';
          }
        }, 100);
      }

      buildGrid();
    </script>
  </body>
</html>
